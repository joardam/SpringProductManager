<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

 <h:head>
	
</h:head>

<h:head></h:head>


<h:body>
<h:form>
<h:commandButton value="Voltar ao Menu" action="#{categoriaController.goToMenu}" />
</h:form>

<h1> Cadastro de Produto </h1>
	<h:form id = "frmProduct">

	
	Nome: <h:inputText value="#{produtoController.produto.descricao}" />
    valor: <h:inputText value="#{produtoController.produto.valor}" />
    Quantidade: <h:inputText value="#{produtoController.produto.qtd}"/>
    
   Categoria:
    <h:selectOneMenu id="categoria" value="#{produtoController.produto.categoria}" converter="#{categoriaConverter}">
        <f:selectItems value="#{categoriaController.listCategoria}" var="categoria" 
                       itemValue="#{categoria}" itemLabel="#{categoria.descricao}" />
    </h:selectOneMenu>
  
	
    <h:commandButton value="Salvar" action="#{produtoController.save}" >
    </h:commandButton>

    <h:commandButton rendered="#{produtoController.editMode == 'EDIT' }" value="Cancelar" action="#{produtoController.cancel}" >
    </h:commandButton>


    <h:dataTable value = "#{produtoController.listProduto}" var="c" id="dtProduct">
         <h:column>
            <f:facet name="header">Nome</f:facet>
            #{c.descricao}
        </h:column>
        <h:column>
            <f:facet name="header">Preço</f:facet>
            #{c.valor}
        </h:column>
        <h:column>
            <f:facet name="header">Quantidade</f:facet>
            #{c.qtd}
 		 </h:column>
 		  <h:column>
            <f:facet name="header">Categoria</f:facet>
            #{c.categoria.descricao}
 		 </h:column>
 		 
 		 
 		  <h:column>
            <f:facet name="header">Ação</f:facet>
            <h:commandButton value="Excluir" action="#{produtoController.remove(c)}" onclick="return window.confirm('confirma ?')">
                <f:ajax render="@form"/>
            </h:commandButton>

            <h:commandButton value="Editar" action="#{produtoController.edit(c)}">
                <f:ajax render="@form"/>
            </h:commandButton>
        </h:column>
 		 
 		 
    </h:dataTable>
	
	<h:message for="categoria" style="color: red; font-weight: bold;" />
	
	</h:form>
</h:body>

</html>